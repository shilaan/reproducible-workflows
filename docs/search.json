[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Reproducible Workflows",
    "section": "",
    "text": "Introduction\nDescription."
  },
  {
    "objectID": "score-1.html",
    "href": "score-1.html",
    "title": "1  SCORE Criminology",
    "section": "",
    "text": "2 Statistical model\nInformation obtained from paper:\nlibrary(MASS)\nlongest_marriage &lt;- max(df_long$months_married)\n\n#Function to run the statistical model for a given number of months married\nrun_model &lt;- function(months = 1:longest_marriage) {\n  #run a generalized mixed model (binomial with logit link)\n  glmmPQL( #using penalized quasi-likelihood (PQL) estimation\n    #regress arrest on within-individual and between-individual predictors\n  fixed = arrest ~ \n    #within-individual, time-varying predictors\n    divorced + separated + single + age + age_sq +\n    #between-individual, time-stable predictors\n    divorced_mean + separated_mean + single_mean + \n    male + black + household_size + family_structure + disadvantage + \n    parental_education + at_risk + incarcerated, \n  random = ~ 1 | id, #each individual is a cluster with 156 timepoints\n  family = binomial, #we're predicting the log odds of arrest\n  data = df_long %&gt;% filter(months_married %in% months),\n  verbose = FALSE\n  )\n}\nBushel claims obtained from the OSF here.\nAll materials on this OSF project may be shared publicly. Overview and description of the materials:\nBersani, B. E.; Doherty, E. (2013). When the ties that bind unwind: Examining the enduring and situational processes of change behind the marriage effect. Criminology, 51(2), 399.\nBureau of Labor Statistics, U.S. Department of Labor. National Longitudinal Survey of Youth 1997 cohort, 1997-2009. Produced and distributed by the Center for Human Resource Research (CHRR), The Ohio State University. Columbus, OH: 2019."
  },
  {
    "objectID": "score-1.html#read-data",
    "href": "score-1.html#read-data",
    "title": "1  SCORE Criminology",
    "section": "1.1 Read data",
    "text": "1.1 Read data\n\n#Data obtained from the NLS here https://www.bls.gov/nls/nlsy97.htm \nNLSY97 &lt;- read.table(here(\"data/NLSY97.dat\"), sep = \" \")\n\n#Run helper functions obtained from the NLS\nsource(here(\"code/NLSY97-helper-functions.R\"))\n\n#Rename variables using Question names instead of Reference Numbers\nNLSY97 &lt;- qnames(NLSY97)"
  },
  {
    "objectID": "score-1.html#data-cleaning-and-processing",
    "href": "score-1.html#data-cleaning-and-processing",
    "title": "1  SCORE Criminology",
    "section": "1.2 Data cleaning and processing",
    "text": "1.2 Data cleaning and processing\n\n1.2.1 Incarceration data\n\n#Get incarceration data\nincarceration &lt;- NLSY97 %&gt;% \n  select(contains(\"INCARC\"))\n\n#Calculate the total number of months respondents were incarcerated\nmonths_incarcerated &lt;- rowSums(incarceration, na.rm = TRUE)\n\n\n\n1.2.2 Age\n\n#Age at start of survey\nage &lt;- NLSY97$`CV_AGE_12/31/96_1997`\n\n#Calculate age for each respondent at each timepoint (156 timepoints in total)\nages &lt;- 1:nrow(NLSY97) %&gt;% \n  #Sequence from age at t=1 to 13 years later\n  map(~ seq(age[.x], age[.x] + 13, length.out = 156)) %&gt;% \n  unlist()\n\n#Create dataframe with respondent id and age over time\nall_ages &lt;- tibble(\n  id = rep(1:nrow(NLSY97), each = 156),\n  age = ages\n)\n\n\n\n1.2.3 Create initial dataset\n\n#Create clean dataframe with relevant variables\ndf &lt;- tibble(\n  #respondent id\n  id = 1:nrow(NLSY97),\n  #gender: 1 = male\n  male = ifelse(NLSY97$KEY_SEX_1997 == 2, 0, 1),\n  #race: 1 = black\n  black = ifelse(NLSY97$KEY_RACE_ETHNICITY_1997 == 1, 1, 0),\n  #household size: number of individuals below 18\n  household_size = NLSY97$CV_HH_UNDER_18_1997,\n  #family structure: 1 = intact\n  family_structure = ifelse(NLSY97$CV_YTH_REL_HH_CURRENT_1997 == 1, 1, 0),\n  #lack of heat: 1 = home lacked electricity and heat in previous month\n  lack_heat = ifelse(NLSY97$`YSAQ-003_1997` == 0, 1, 0),\n  #hard times\n  hard_times = NLSY97$`PC8-090_1997`,\n  #presence of dilapidated buildings: 1 = poorly kept buildings\n  dilapidated = ifelse(NLSY97$`YIR-1400_1998` == 3, 1, 0),\n  #education of parents\n  education_mother = NLSY97$CV_HGC_BIO_MOM_1997,\n  education_father = NLSY97$CV_HGC_BIO_DAD_1997,\n  #age of first sexual intercourse: 1 = at or before 13 years of age\n  age_sex = ifelse(NLSY97$`YSAQ-300_1999` &lt; 14, 1, 0),\n  #age of first arrest: 1 = at or before 13 years of age\n  age_arrest = ifelse(NLSY97$`YSAQ-441_1997` &lt; 14, 1, 0),\n  #age of first weed use: 1 = at or before 13 years of age\n  age_weed = ifelse(NLSY97$`YSAQ-370_1997` &lt; 14, 1, 0),\n  #age of first cocaine use: 1 = at or before 13 years of age\n  age_cocaine = ifelse(NLSY97$`YSAQ-372C_1998` &lt; 14, 1, 0),\n  #incarcerated: 1 = at least one episode of incarceration\n  incarcerated = ifelse(months_incarcerated &gt; 0, 1, 0)\n) %&gt;% \n  rowwise() %&gt;% \n  mutate(\n  #disadvantaged = 1 if lack_heat or hard_times or dilapidated buildings\n  disadvantage = ifelse(\n    sum(lack_heat, hard_times, dilapidated, na.rm = TRUE) &gt; 0, 1, 0\n    ),\n  #mean parental education\n  parental_education = mean(c(education_mother, education_father), na.rm = TRUE),\n  #drug use = 1 if used weed or cocaine before 14 years of age\n  age_drug = ifelse(sum(age_weed, age_cocaine, na.rm = TRUE) &gt; 0, 1, 0),\n  #at risk = sum of age_sex, age_drug, age_arrest\n  at_risk = sum(age_sex, age_drug, age_arrest, na.rm = TRUE)\n  ) %&gt;% \n  #keep relevant variables\n  select(\n    id:family_structure, \n    disadvantage:parental_education, \n    at_risk, \n    incarcerated\n    )\n\n\n\n1.2.4 Arrest status\nArrest status is collected every month, with the following answer options:\n\n0: R not arrested in this month and not arrested in a previous month\n1 to 98: Number of times R arrested in this month\n99: R arrested previously but not in this month\n\nThe authors recode this to a binary, monthly arrest status variable: nonevent months are coded 0, whereas months with at least one documented arrest are coded 1.\n\narrest &lt;- NLSY97 %&gt;% \n  #select relevant columns\n  select(contains(\"ARREST\")) %&gt;% \n  #create participant id\n  mutate(\n    id = 1:nrow(NLSY97)\n  ) %&gt;% \n  #make data long: each time point becomes an individual row\n  pivot_longer(\n    cols = contains(\"ARREST\"),\n    names_to = \"time\",\n    names_pattern = \"ARREST_STATUS_?(.*)_XRND\",\n    values_to = \"arrest\"\n  ) %&gt;% \n  group_by(id) %&gt;% \n  #calculate the total number of arrests for each respondent\n  mutate(\n    sum_arrests = sum(arrest, na.rm = TRUE)\n  ) %&gt;% \n  ungroup() %&gt;% \n  #keep only respondents who were arrested at least once\n  filter(sum_arrests &gt; 0) %&gt;% \n  #recode arrest to binary indicator variable\n  mutate(\n    arrest = ifelse(arrest %in% c(0,99), 0, ifelse(is.na(arrest), NA, 1))\n  ) %&gt;% \n  select(!sum_arrests)\n\n#data quality checks\n#for each respondent, we should have 156 rows (13 years * 12 months) \n#number_of_timepoints &lt;- ncol(NLSY97 %&gt;% select(contains(\"ARREST\")))\n#number_of_respondents &lt;- length(unique(arrest$id)) #in paper: 2,959 (Table 2)\n#nrow(arrest) == number_of_respondents * number_of_timepoints #TRUE\n\n\n\n1.2.5 Relationship status\nRelationship status is collected every month, with the following answer options:\n\n0 Never Married, Not Cohabitating\n1 Never Married, Cohabiting\n2 Married\n3 Legally Separated\n4 Divorced\n5 Widowed\n\nThe authors create separate, mutually exclusive relationship indicators:\n\nSingle\nMarried\nLegally separated\nDivorced\n\nIt is unclear what the authors do with widowers.\n\nmarital &lt;- NLSY97 %&gt;% \n  #select relevant columns\n  select(contains(\"MAR\")) %&gt;% \n  #create participant id\n  mutate(\n    id = 1:nrow(NLSY97)\n  ) %&gt;% \n  #make data long: each time point becomes an individual row\n  pivot_longer(\n    cols = contains(\"MAR\"),\n    names_to = \"time\",\n    names_pattern = \"MAR_STATUS_?(.*)_XRND\",\n    values_to = \"marital_status\"\n  ) %&gt;%\n  #create indicator variables for relationship status\n  mutate(\n    #note that the paper does not disclose what to do with widowers\n    married = ifelse(marital_status == 2, 1, 0),\n    divorced = ifelse(marital_status == 4, 1, 0),\n    separated = ifelse(marital_status == 3, 1, 0),\n    single = ifelse(marital_status %in% c(0, 1), 1, 0)\n  ) %&gt;% \n  group_by(id) %&gt;% \n  #calculate the total number of months of marriage per respondent\n  mutate(\n    months_married = sum(married, na.rm = TRUE)\n  ) %&gt;% \n  ungroup() %&gt;% \n  #only keep respondents who were married for at least 1 month \n  filter(months_married &gt; 0) %&gt;% \n  select(!marital_status)\n\n#data quality checks\n#for each respondent, we should have 156 rows (13 years * 12 months) \n#number_of_timepoints &lt;- ncol(NLSY97 %&gt;% select(contains(\"MAR\")))\n#number_of_respondents &lt;- length(unique(marital$id)) #in paper: 2,848 (Table 2)\n#nrow(marital) == number_of_respondents * number_of_timepoints #TRUE\n#\"a third of the full sample has ever married by 2009:\"\n#number_of_respondents / nrow(NLSY97) #35 percent\n#mean number of months married in paper is 47.86\n#mean(marital$months_married) #48.73 months\n#for those who have ever been married, marriage length is an average of 4 years\n#mean(marital$months_married) /12 #4.06 years\n#all data quality checks passed"
  },
  {
    "objectID": "score-1.html#create-final-merged-dataset",
    "href": "score-1.html#create-final-merged-dataset",
    "title": "1  SCORE Criminology",
    "section": "1.3 Create final, merged dataset",
    "text": "1.3 Create final, merged dataset\n\n#keep only the marriage data for respondents who were ever arrested\nmarital &lt;- marital %&gt;% \n  filter(id %in% arrest$id)\n\n#keep only the arrest data for respondents who were ever married\narrest &lt;- arrest %&gt;% \n  filter(id %in% marital$id)\n\n#keep only age data for respondent who were ever arrested and ever married\nall_ages &lt;- all_ages %&gt;% \n  filter(id %in% arrest$id)\n \n#create final dataframe (long) with marriage data, arrest data, and covariates\ndf_long &lt;- left_join(marital, df, by = \"id\") %&gt;% \n  left_join(arrest, by = c(\"id\", \"time\")) %&gt;% \n  mutate(\n    id = factor(id),\n    age = all_ages$age,\n    age_sq = age^2\n  ) %&gt;%\n  group_by(id) %&gt;%\n  mutate(\n    #mean relationship state for each individual (between-individual control)\n    married_mean = mean(married, na.rm = TRUE),\n    divorced_mean = mean(divorced, na.rm = TRUE),\n    separated_mean = mean(separated, na.rm = TRUE),\n    single_mean = mean(single, na.rm = TRUE)\n  )\n\n#data quality check: n=813 in paper\n#nlevels(df_long$id) #n=882"
  },
  {
    "objectID": "score-1.html#claim-id-g82z5k",
    "href": "score-1.html#claim-id-g82z5k",
    "title": "1  Source Data Reproduction Attempt to Evaluate 2 Claims from BERSANI_Criminology_2013_zmYY_2w9mo",
    "section": "5.1 Claim ID: g82z5k",
    "text": "5.1 Claim ID: g82z5k\nCoded claim 4 text (original paper): Divorce has a significant detrimental effect on offending and increases the likelihood of arrest by 52 percent (table 3, model 2). Stated simply, an individual is more criminally active when divorced compared with when he or she is married, taking into account periods of legal separation and time single. [Table 3, Within Individual: Divorce, Model 2, Coeff. = .418, SE = .093, Sig. = p &lt; .001]\nReproduction data source(s):\nhttps://www.nlsinfo.org/investigator/pages/search#\nDescription of reproduction data:\nOriginal data obtained from the US Bureau of Labor Statistics. NLSY97 (National Longitudinal Study of Youth 1997) downloaded from the NLS investigator on March 1, 2022.\n\ng82z5k &lt;- run_model() #run model on entire sample\n#check fixed effect of divorce\nsummary(g82z5k)$tTable[\"divorced\", c(\"Value\", \"p-value\")]\n\n        Value       p-value \n0.47692474621 0.00008120623 \n\ng82z5k$dims$ngrps[1] #check sample size\n\n id \n826 \n\n\nPrimary reproduction criteria\n\n\n\n\n\n\n\n\n\n\n\nCriterion\nOriginal value\nPrecise reproduction\nApproximate reproduction\nNon-reproduction\nReproduction result\n\n\n\n\nSample size\nn = 813\nn = 813\n691 \\(\\le\\) n \\(\\le\\) 935\nn &lt; 691 or n &gt; 935\nn = 826\n\n\nFocal coefficient\n\\(\\beta\\) = .418\n\\(\\beta\\) = .418\n.355 \\(\\le \\beta \\le\\) .481\n\\(\\beta\\) &lt; .355 or \\(\\beta\\) &gt; .481\n\\(\\beta\\) = .477\n\n\nFocal test statistic\nNA\nNA\nNA\nNA\nNA\n\n\nFocal effect size\nNA\nNA\nNA\nNA\nNA\n\n\nFocal p-value\np &lt; .001\np &lt; .001\n.001 \\(\\le\\) p \\(\\le\\) .051\np &gt; .051\np = .00008120623\n\n\n\nAnalyst success criteria: The claim will be considered reproducible if a generalized mixed model predicting the log odds of arrest meets the approximate reproduction criteria for the sample size, p-value, and the focal coefficient of divorce.\nReproduction outcome: Based on these criteria, the claim did reproduce."
  },
  {
    "objectID": "score-1.html#claim-id-moyz3d",
    "href": "score-1.html#claim-id-moyz3d",
    "title": "1  Source Data Reproduction Attempt to Evaluate 2 Claims from BERSANI_Criminology_2013_zmYY_2w9mo",
    "section": "5.2 Claim ID: moyz3d",
    "text": "5.2 Claim ID: moyz3d\nCoded claim 4 text (original paper): For short marriages, those lasting 23 months or less (models 1 and 2), neither getting divorced nor legally separating statistically alters one’s risk of arrest compared with when they were married…Conversely, for those in marriages lasting 24 months or longer, divorce is associated with a significant increase in the likelihood of arrest. [Table 5. Effect of Marital Dissolution on the Probability of Arrest by Marriage Length, Within Individual: Divorce, Model 1 Coeff. = .113, SE = .228; Model 2 Coeff. = -.442, SE = .396; Model 3 Coeff. = .465, SE = .151, Sig. = p &lt; .01; Model 4 Coeff. = .522, SE = .107, Sig. = p &lt; .001]\nReproduction data source(s):\nhttps://www.nlsinfo.org/investigator/pages/search#\nDescription of reproduction data:\nOriginal data obtained from the US Bureau of Labor Statistics. NLSY97 (National Longitudinal Study of Youth 1997) downloaded from the NLS investigator on March 1, 2022.\n\n#Model 1\nmodel1 &lt;- run_model(months = 1:11) \nsummary(model1)$tTable[\"divorced\", \"p-value\"] #check p-value model 1\n\n[1] 0.9048844\n\nmodel1$dims$ngrps[1] #check sample size model 1\n\n id \n113 \n\n#Model 2\nmodel2 &lt;- run_model(months = 12:23) \nsummary(model2)$tTable[\"divorced\", \"p-value\"] #check p-value model 2\n\n[1] 0.8316677\n\nmodel2$dims$ngrps[1] #check sample size model 2\n\n id \n122 \n\n#Model 3\nmodel3 &lt;- run_model(months = 24:35) \nsummary(model3)$tTable[\"divorced\", \"Value\"] #check estimate model 3\n\n[1] 0.4159142\n\nmodel3$dims$ngrps[1] #check sample size model 3\n\n id \n138 \n\n#Model 4\nmodel4 &lt;- run_model(months = 36:longest_marriage) \nsummary(model4)$tTable[\"divorced\", c(\"Value\", \"p-value\")] #check estimate + p-value model 4\n\n     Value    p-value \n0.48170489 0.00562246 \n\nmodel4$dims$ngrps[1] #check sample size model 4\n\n id \n453 \n\n\nPrimary reproduction criteria\n\n\n\n\n\n\n\n\n\n\n\nCriterion\nOriginal value\nPrecise reproduction\nApproximate reproduction\nNon-reproduction\nReproduction result\n\n\n\n\nSample size\nmodel 4: n = 430\nn = 430\n366 \\(\\le\\) n \\(\\le\\) 495\nn &lt; 366 or n &gt; 495\nn = 453\n\n\nFocal coefficient\nmodel 4: \\(\\beta\\) = .522\n\\(\\beta\\) = .522\n.444 \\(\\le \\beta \\le\\) .600\n\\(\\beta\\) &lt; .444 or \\(\\beta\\) &gt; .600\n\\(\\beta\\) = 0.482\n\n\nFocal test statistic\nNA\nNA\nNA\nNA\nNA\n\n\nFocal effect size\nNA\nNA\nNA\nNA\nNA\n\n\nFocal p-value\nmodel 4: p &lt; .001\np &lt; .001\n.001 \\(\\le\\) p \\(\\le\\) .051\np &gt; .051\np = .00562246\n\n\n\nSecondary reproduction criteria\n\n\n\n\n\n\n\n\n\n\n\nCriterion\nOriginal value\nPrecise reproduction\nApproximate reproduction\nNon-reproduction\nReproduction result\n\n\n\n\nSample size model 1\nn = 121\nn = 121\n103 \\(\\le\\) n \\(\\le\\) 139\nn &lt; 103 or n &gt; 139\nn = 113\n\n\nSample size model 2\nn = 120\nn = 120\n102 \\(\\le\\) n \\(\\le\\) 138\nn &lt; 102 or n &gt; 138\nn = 122\n\n\nSample size model 3\nn = 142\nn = 142\n121 \\(\\le\\) n \\(\\le\\) 163\nn &lt; 121 or n &gt; 163\nn = 138\n\n\np-value model 1\np &gt; .05\np &gt; .05\n0 &lt; p \\(\\le\\) .05\np = 0\np = .9048844\n\n\np-value model 2\np &gt; .05\np &gt; .05\n0 &lt; p \\(\\le\\) .05\np = 0\np = .8316659\n\n\nCoefficient model 3\n\\(\\beta\\) = .465\n\\(\\beta\\) = .465\n.395 \\(\\le \\beta \\le\\) .535\n\\(\\beta\\) &lt; .395 or \\(\\beta\\) &gt; .535\n\\(\\beta\\) = .416\n\n\n\nAnalyst success criteria: The claim will be considered reproducible if a generalized mixed model predicting the log odds of arrest meets the approximate reproduction criteria for the sample sizes of models 1, 2, 3, and 4, the approximate reproduction criteria for the coefficients of divorce for models 3 and 4, the approximate reproduction criteria for the p value of model 4, and the precise reproduction criteria for the p-values of models 1 and 2 (p &gt; .05).\nReproduction outcome: Based on these criteria, the claim did reproduce."
  },
  {
    "objectID": "score-1.html#reconstruction-of-data",
    "href": "score-1.html#reconstruction-of-data",
    "title": "1  SCORE Criminology",
    "section": "1.1 Reconstruction of data",
    "text": "1.1 Reconstruction of data\n\n1.1.1 Read data\n\n#Data obtained from the NLS here https://www.bls.gov/nls/nlsy97.htm \nNLSY97 &lt;- read.table(here(\"data/NLSY97.dat\"), sep = \" \")\n\n#Run helper functions obtained from the NLS\nsource(here(\"code/NLSY97-helper-functions.R\"))\n\n#Rename variables using Question names instead of Reference Numbers\nNLSY97 &lt;- qnames(NLSY97)\n\n\n\n1.1.2 Data cleaning and processing\n\n1.1.2.1 Incarceration data\n\n#Get incarceration data\nincarceration &lt;- NLSY97 %&gt;% \n  select(contains(\"INCARC\"))\n\n#Calculate the total number of months respondents were incarcerated\nmonths_incarcerated &lt;- rowSums(incarceration, na.rm = TRUE)\n\n\n\n1.1.2.2 Age\n\n#Age at start of survey\nage &lt;- NLSY97$`CV_AGE_12/31/96_1997`\n\n#Calculate age for each respondent at each timepoint (156 timepoints in total)\nages &lt;- 1:nrow(NLSY97) %&gt;% \n  #Sequence from age at t=1 to 13 years later\n  map(~ seq(age[.x], age[.x] + 13, length.out = 156)) %&gt;% \n  unlist()\n\n#Create dataframe with respondent id and age over time\nall_ages &lt;- tibble(\n  id = rep(1:nrow(NLSY97), each = 156),\n  age = ages\n)\n\n\n\n1.1.2.3 Create initial dataset\n\n#Create clean dataframe with relevant variables\ndf &lt;- tibble(\n  #respondent id\n  id = 1:nrow(NLSY97),\n  #gender: 1 = male\n  male = ifelse(NLSY97$KEY_SEX_1997 == 2, 0, 1),\n  #race: 1 = black\n  black = ifelse(NLSY97$KEY_RACE_ETHNICITY_1997 == 1, 1, 0),\n  #household size: number of individuals below 18\n  household_size = NLSY97$CV_HH_UNDER_18_1997,\n  #family structure: 1 = intact\n  family_structure = ifelse(NLSY97$CV_YTH_REL_HH_CURRENT_1997 == 1, 1, 0),\n  #lack of heat: 1 = home lacked electricity and heat in previous month\n  lack_heat = ifelse(NLSY97$`YSAQ-003_1997` == 0, 1, 0),\n  #hard times\n  hard_times = NLSY97$`PC8-090_1997`,\n  #presence of dilapidated buildings: 1 = poorly kept buildings\n  dilapidated = ifelse(NLSY97$`YIR-1400_1998` == 3, 1, 0),\n  #education of parents\n  education_mother = NLSY97$CV_HGC_BIO_MOM_1997,\n  education_father = NLSY97$CV_HGC_BIO_DAD_1997,\n  #age of first sexual intercourse: 1 = at or before 13 years of age\n  age_sex = ifelse(NLSY97$`YSAQ-300_1999` &lt; 14, 1, 0),\n  #age of first arrest: 1 = at or before 13 years of age\n  age_arrest = ifelse(NLSY97$`YSAQ-441_1997` &lt; 14, 1, 0),\n  #age of first weed use: 1 = at or before 13 years of age\n  age_weed = ifelse(NLSY97$`YSAQ-370_1997` &lt; 14, 1, 0),\n  #age of first cocaine use: 1 = at or before 13 years of age\n  age_cocaine = ifelse(NLSY97$`YSAQ-372C_1998` &lt; 14, 1, 0),\n  #incarcerated: 1 = at least one episode of incarceration\n  incarcerated = ifelse(months_incarcerated &gt; 0, 1, 0)\n) %&gt;% \n  rowwise() %&gt;% \n  mutate(\n  #disadvantaged = 1 if lack_heat or hard_times or dilapidated buildings\n  disadvantage = ifelse(\n    sum(lack_heat, hard_times, dilapidated, na.rm = TRUE) &gt; 0, 1, 0\n    ),\n  #mean parental education\n  parental_education = mean(c(education_mother, education_father), na.rm = TRUE),\n  #drug use = 1 if used weed or cocaine before 14 years of age\n  age_drug = ifelse(sum(age_weed, age_cocaine, na.rm = TRUE) &gt; 0, 1, 0),\n  #at risk = sum of age_sex, age_drug, age_arrest\n  at_risk = sum(age_sex, age_drug, age_arrest, na.rm = TRUE)\n  ) %&gt;% \n  #keep relevant variables\n  select(\n    id:family_structure, \n    disadvantage:parental_education, \n    at_risk, \n    incarcerated\n    )\n\n\n\n1.1.2.4 Arrest status\nArrest status is collected every month, with the following answer options:\n\n0: R not arrested in this month and not arrested in a previous month\n1 to 98: Number of times R arrested in this month\n99: R arrested previously but not in this month\n\nThe authors recode this to a binary, monthly arrest status variable: nonevent months are coded 0, whereas months with at least one documented arrest are coded 1.\n\narrest &lt;- NLSY97 %&gt;% \n  #select relevant columns\n  select(contains(\"ARREST\")) %&gt;% \n  #create participant id\n  mutate(\n    id = 1:nrow(NLSY97)\n  ) %&gt;% \n  #make data long: each time point becomes an individual row\n  pivot_longer(\n    cols = contains(\"ARREST\"),\n    names_to = \"time\",\n    names_pattern = \"ARREST_STATUS_?(.*)_XRND\",\n    values_to = \"arrest\"\n  ) %&gt;% \n  group_by(id) %&gt;% \n  #calculate the total number of arrests for each respondent\n  mutate(\n    sum_arrests = sum(arrest, na.rm = TRUE)\n  ) %&gt;% \n  ungroup() %&gt;% \n  #keep only respondents who were arrested at least once\n  filter(sum_arrests &gt; 0) %&gt;% \n  #recode arrest to binary indicator variable\n  mutate(\n    arrest = ifelse(arrest %in% c(0,99), 0, ifelse(is.na(arrest), NA, 1))\n  ) %&gt;% \n  select(!sum_arrests)\n\n#data quality checks\n#for each respondent, we should have 156 rows (13 years * 12 months) \n#number_of_timepoints &lt;- ncol(NLSY97 %&gt;% select(contains(\"ARREST\")))\n#number_of_respondents &lt;- length(unique(arrest$id)) #in paper: 2,959 (Table 2)\n#nrow(arrest) == number_of_respondents * number_of_timepoints #TRUE\n\n\n\n1.1.2.5 Relationship status\nRelationship status is collected every month, with the following answer options:\n\n0 Never Married, Not Cohabitating\n1 Never Married, Cohabiting\n2 Married\n3 Legally Separated\n4 Divorced\n5 Widowed\n\nThe authors create separate, mutually exclusive relationship indicators:\n\nSingle\nMarried\nLegally separated\nDivorced\n\nIt is unclear what the authors do with widowers.\n\nmarital &lt;- NLSY97 %&gt;% \n  #select relevant columns\n  select(contains(\"MAR\")) %&gt;% \n  #create participant id\n  mutate(\n    id = 1:nrow(NLSY97)\n  ) %&gt;% \n  #make data long: each time point becomes an individual row\n  pivot_longer(\n    cols = contains(\"MAR\"),\n    names_to = \"time\",\n    names_pattern = \"MAR_STATUS_?(.*)_XRND\",\n    values_to = \"marital_status\"\n  ) %&gt;%\n  #create indicator variables for relationship status\n  mutate(\n    #note that the paper does not disclose what to do with widowers\n    married = ifelse(marital_status == 2, 1, 0),\n    divorced = ifelse(marital_status == 4, 1, 0),\n    separated = ifelse(marital_status == 3, 1, 0),\n    single = ifelse(marital_status %in% c(0, 1), 1, 0)\n  ) %&gt;% \n  group_by(id) %&gt;% \n  #calculate the total number of months of marriage per respondent\n  mutate(\n    months_married = sum(married, na.rm = TRUE)\n  ) %&gt;% \n  ungroup() %&gt;% \n  #only keep respondents who were married for at least 1 month \n  filter(months_married &gt; 0) %&gt;% \n  select(!marital_status)\n\n#data quality checks\n#for each respondent, we should have 156 rows (13 years * 12 months) \n#number_of_timepoints &lt;- ncol(NLSY97 %&gt;% select(contains(\"MAR\")))\n#number_of_respondents &lt;- length(unique(marital$id)) #in paper: 2,848 (Table 2)\n#nrow(marital) == number_of_respondents * number_of_timepoints #TRUE\n#\"a third of the full sample has ever married by 2009:\"\n#number_of_respondents / nrow(NLSY97) #35 percent\n#mean number of months married in paper is 47.86\n#mean(marital$months_married) #48.73 months\n#for those who have ever been married, marriage length is an average of 4 years\n#mean(marital$months_married) /12 #4.06 years\n#all data quality checks passed\n\n\n\n\n1.1.3 Create final, merged dataset\n\n#keep only the marriage data for respondents who were ever arrested\nmarital &lt;- marital %&gt;% \n  filter(id %in% arrest$id)\n\n#keep only the arrest data for respondents who were ever married\narrest &lt;- arrest %&gt;% \n  filter(id %in% marital$id)\n\n#keep only age data for respondent who were ever arrested and ever married\nall_ages &lt;- all_ages %&gt;% \n  filter(id %in% arrest$id)\n \n#create final dataframe (long) with marriage data, arrest data, and covariates\ndf_long &lt;- left_join(marital, df, by = \"id\") %&gt;% \n  left_join(arrest, by = c(\"id\", \"time\")) %&gt;% \n  mutate(\n    id = factor(id),\n    age = all_ages$age,\n    age_sq = age^2\n  ) %&gt;%\n  group_by(id) %&gt;%\n  mutate(\n    #mean relationship state for each individual (between-individual control)\n    married_mean = mean(married, na.rm = TRUE),\n    divorced_mean = mean(divorced, na.rm = TRUE),\n    separated_mean = mean(separated, na.rm = TRUE),\n    single_mean = mean(single, na.rm = TRUE)\n  )\n\n#data quality check: n=813 in paper\n#nlevels(df_long$id) #n=882"
  },
  {
    "objectID": "score-1.html#statistical-model",
    "href": "score-1.html#statistical-model",
    "title": "1  SCORE Criminology",
    "section": "1.4 Statistical model",
    "text": "1.4 Statistical model\nInformation obtained from paper:\n\nGeneralized Mixed Model (binomial family with logit link)\nEstimates obtained using penalized quasi-likelihood estimation (PQL)\nDependent variable: arrest status (log odds of arrest)\nTime-varying covariates: relationship status (single, marriage, legal separation, divorce), age, and age squared\nTime-invariant covariates: gender, race, household size, family structure, disadvantage, parental education, at-risk, incarceration history\nLevel-1 (‘within’) variables: relationship state, age, and age\\(^2\\)\nLevel-2 (‘between’) variables: aggregate relationship state, controls\n\n\nlibrary(MASS)\nlongest_marriage &lt;- max(df_long$months_married)\n\n#Function to run the statistical model for a given number of months married\nrun_model &lt;- function(months = 1:longest_marriage) {\n  #run a generalized mixed model (binomial with logit link)\n  glmmPQL( #using penalized quasi-likelihood (PQL) estimation\n    #regress arrest on within-individual and between-individual predictors\n  fixed = arrest ~ \n    #within-individual, time-varying predictors\n    divorced + separated + single + age + age_sq +\n    #between-individual, time-stable predictors\n    divorced_mean + separated_mean + single_mean + \n    male + black + household_size + family_structure + disadvantage + \n    parental_education + at_risk + incarcerated, \n  random = ~ 1 | id, #each individual is a cluster with 156 timepoints\n  family = binomial, #we're predicting the log odds of arrest\n  data = df_long %&gt;% filter(months_married %in% months),\n  verbose = FALSE\n  )\n}"
  },
  {
    "objectID": "score-1.html#claim-evaluations",
    "href": "score-1.html#claim-evaluations",
    "title": "1  SCORE Criminology",
    "section": "1.5 Claim evaluations",
    "text": "1.5 Claim evaluations\nBushel claims obtained from the OSF here.\n\nClaim 1Claim 2: Model 1Claim 2: Model 2Claim 2: Model 3Claim 2: Model 4\n\n\nCoded claim text (original paper): Divorce has a significant detrimental effect on offending and increases the likelihood of arrest by 52 percent (table 3, model 2). Stated simply, an individual is more criminally active when divorced compared with when he or she is married, taking into account periods of legal separation and time single.\n[Table 3, Within Individual: Divorce, Model 2, Coeff. = .418, SE = .093, Sig. = p &lt; .001]\nReproduction data source(s):\nhttps://www.nlsinfo.org/investigator/pages/search#\nDescription of reproduction data:\nOriginal data obtained from the US Bureau of Labor Statistics. NLSY97 (National Longitudinal Study of Youth 1997) downloaded from the NLS investigator on March 1, 2022.\nReproduction criteria\n\n\n\n\n\n\n\n\n\n\nCriterion\nOriginal value\nPrecise reproduction\nApproximate reproduction\nNon-reproduction\n\n\n\n\nSample size\nn = 813\nn = 813\n691 \\(\\le\\) n \\(\\le\\) 935\nn &lt; 691 or n &gt; 935\n\n\nCoefficient\n\\(\\beta\\) = .418\n\\(\\beta\\) = .418\n.355 \\(\\le \\beta \\le\\) .481\n\\(\\beta\\) &lt; .355 or \\(\\beta\\) &gt; .481\n\n\np-value\np &lt; .001\np &lt; .001\n.001 \\(\\le\\) p \\(\\le\\) .051\np &gt; .051\n\n\n\nNB: The sample size and focal coefficient are considered “approximately reproduced” when the reproduction result is within 15% of the original result. For p-values, the result is considered “approximately reproduced” when it is within 0.05 points of the original.\nAnalyst success criteria: The claim will be considered reproducible if a generalized mixed model predicting the log odds of arrest meets the approximate reproduction criteria for the sample size, p-value, and the focal coefficient of divorce.\nReproduction results\n\nclaim1 &lt;- run_model() #run model on entire sample\n#check fixed effect of divorce\nsummary(claim1)$tTable[\"divorced\", c(\"Value\", \"p-value\")]\n\n        Value       p-value \n0.47692474621 0.00008120623 \n\nclaim1$dims$ngrps[1] #check sample size\n\n id \n826 \n\n\nReproduction outcome: Based on the reproduction criteria, the claim did reproduce.\n\n\nCoded claim text (original paper): For short marriages, those lasting 23 months or less (models 1 and 2), neither getting divorced nor legally separating statistically alters one’s risk of arrest compared with when they were married. Conversely, for those in marriages lasting 24 months or longer, divorce is associated with a significant increase in the likelihood of arrest.\n[Table 5. Effect of Marital Dissolution on the Probability of Arrest by Marriage Length, Within Individual: Divorce, Model 1 Coeff. = .113, SE = .228]\nReproduction data source(s):\nhttps://www.nlsinfo.org/investigator/pages/search#\nDescription of reproduction data:\nOriginal data obtained from the US Bureau of Labor Statistics. NLSY97 (National Longitudinal Study of Youth 1997) downloaded from the NLS investigator on March 1, 2022.\nReproduction criteria\n\n\n\n\n\n\n\n\n\n\nCriterion\nOriginal value\nPrecise reproduction\nApproximate reproduction\nNon-reproduction\n\n\n\n\nSample size\nn = 121\nn = 121\n103 \\(\\le\\) n \\(\\le\\) 139\nn &lt; 103 or n &gt; 139\n\n\np-value\np &gt; .05\np &gt; .05\n0 &lt; p \\(\\le\\) .05\np = 0\n\n\n\nNB: The sample size and focal coefficient are considered “approximately reproduced” when the reproduction result is within 15% of the original result. For p-values, the result is considered “approximately reproduced” when it is within 0.05 points of the original.\nAnalyst success criteria: The claim will be considered reproducible if a generalized mixed model predicting the log odds of arrest meets the approximate reproduction criteria for the sample size and the precise reproduction criteria for the p-value (p &gt; .05).\nReproduction results\n\n#Model 1\nmodel1 &lt;- run_model(months = 1:11) \nsummary(model1)$tTable[\"divorced\", \"p-value\"] #check p-value model 1\n\n[1] 0.9048844\n\nmodel1$dims$ngrps[1] #check sample size model 1\n\n id \n113 \n\n\nReproduction outcome: Based on the reproduction criteria, the claim did reproduce.\n\n\nCoded claim text (original paper): For short marriages, those lasting 23 months or less (models 1 and 2), neither getting divorced nor legally separating statistically alters one’s risk of arrest compared with when they were married. Conversely, for those in marriages lasting 24 months or longer, divorce is associated with a significant increase in the likelihood of arrest.\n[Table 5. Effect of Marital Dissolution on the Probability of Arrest by Marriage Length, Within Individual: Divorce, Model 2 Coeff. = -.442, SE = .396]\nReproduction data source(s):\nhttps://www.nlsinfo.org/investigator/pages/search#\nDescription of reproduction data:\nOriginal data obtained from the US Bureau of Labor Statistics. NLSY97 (National Longitudinal Study of Youth 1997) downloaded from the NLS investigator on March 1, 2022.\nReproduction criteria\n\n\n\n\n\n\n\n\n\n\nCriterion\nOriginal value\nPrecise reproduction\nApproximate reproduction\nNon-reproduction\n\n\n\n\nSample size\nn = 120\nn = 120\n102 \\(\\le\\) n \\(\\le\\) 138\nn &lt; 102 or n &gt; 138\n\n\np-value\np &gt; .05\np &gt; .05\n0 &lt; p \\(\\le\\) .05\np = 0\n\n\n\nNB: The sample size and focal coefficient are considered “approximately reproduced” when the reproduction result is within 15% of the original result. For p-values, the result is considered “approximately reproduced” when it is within 0.05 points of the original.\nAnalyst success criteria: The claim will be considered reproducible if a generalized mixed model predicting the log odds of arrest meets the approximate reproduction criteria for the sample size and the precise reproduction criteria for the p-value (p &gt; .05).\nReproduction results\n\n#Model 2\nmodel2 &lt;- run_model(months = 12:23) \nsummary(model2)$tTable[\"divorced\", \"p-value\"] #check p-value model 2\n\n[1] 0.8316677\n\nmodel2$dims$ngrps[1] #check sample size model 2\n\n id \n122 \n\n\nReproduction outcome: Based on the reproduction criteria, the claim did reproduce.\n\n\nCoded claim text (original paper): For short marriages, those lasting 23 months or less (models 1 and 2), neither getting divorced nor legally separating statistically alters one’s risk of arrest compared with when they were married. Conversely, for those in marriages lasting 24 months or longer, divorce is associated with a significant increase in the likelihood of arrest.\n[Table 5. Effect of Marital Dissolution on the Probability of Arrest by Marriage Length, Within Individual: Divorce, Model 3 Coeff. = .465, SE = .151, Sig. = p &lt; .01]\nReproduction data source(s):\nhttps://www.nlsinfo.org/investigator/pages/search#\nDescription of reproduction data:\nOriginal data obtained from the US Bureau of Labor Statistics. NLSY97 (National Longitudinal Study of Youth 1997) downloaded from the NLS investigator on March 1, 2022.\nReproduction criteria\n\n\n\n\n\n\n\n\n\n\nCriterion\nOriginal value\nPrecise reproduction\nApproximate reproduction\nNon-reproduction\n\n\n\n\nSample size\nn = 142\nn = 142\n121 \\(\\le\\) n \\(\\le\\) 163\nn &lt; 121 or n &gt; 163\n\n\nCoefficient\n\\(\\beta\\) = .465\n\\(\\beta\\) = .465\n.395 \\(\\le \\beta \\le\\) .535\n\\(\\beta\\) &lt; .395 or \\(\\beta\\) &gt; .535\n\n\n\nNB: The sample size and focal coefficient are considered “approximately reproduced” when the reproduction result is within 15% of the original result. For p-values, the result is considered “approximately reproduced” when it is within 0.05 points of the original.\nAnalyst success criteria: The claim will be considered reproducible if a generalized mixed model predicting the log odds of arrest meets the approximate reproduction criteria for the sample size and the approximate reproduction criteria for the coefficient of divorce.\nReproduction results\n\n#Model 3\nmodel3 &lt;- run_model(months = 24:35) \nsummary(model3)$tTable[\"divorced\", \"Value\"] #check estimate model 3\n\n[1] 0.4159142\n\nmodel3$dims$ngrps[1] #check sample size model 3\n\n id \n138 \n\n\nReproduction outcome: Based on the reproduction criteria, the claim did reproduce.\n\n\nCoded claim text (original paper): For short marriages, those lasting 23 months or less (models 1 and 2), neither getting divorced nor legally separating statistically alters one’s risk of arrest compared with when they were married. Conversely, for those in marriages lasting 24 months or longer, divorce is associated with a significant increase in the likelihood of arrest.\n[Table 5. Effect of Marital Dissolution on the Probability of Arrest by Marriage Length, Within Individual: Divorce, Model 4 Coeff. = .522, SE = .107, Sig. = p &lt; .001]\nReproduction data source(s):\nhttps://www.nlsinfo.org/investigator/pages/search#\nDescription of reproduction data:\nOriginal data obtained from the US Bureau of Labor Statistics. NLSY97 (National Longitudinal Study of Youth 1997) downloaded from the NLS investigator on March 1, 2022.\nReproduction criteria\n\n\n\n\n\n\n\n\n\n\nCriterion\nOriginal value\nPrecise reproduction\nApproximate reproduction\nNon-reproduction\n\n\n\n\nSample size\nn = 430\nn = 430\n366 \\(\\le\\) n \\(\\le\\) 495\nn &lt; 366 or n &gt; 495\n\n\nCoefficient\n\\(\\beta\\) = .522\n\\(\\beta\\) = .522\n.444 \\(\\le \\beta \\le\\) .600\n\\(\\beta\\) &lt; .444 or \\(\\beta\\) &gt; .600\n\n\np-value\np &lt; .001\np &lt; .001\n.001 \\(\\le\\) p \\(\\le\\) .051\np &gt; .051\n\n\n\nNB: The sample size and focal coefficient are considered “approximately reproduced” when the reproduction result is within 15% of the original result. For p-values, the result is considered “approximately reproduced” when it is within 0.05 points of the original.\nAnalyst success criteria: The claim will be considered reproducible if a generalized mixed model predicting the log odds of arrest meets the approximate reproduction criteria for the sample size, the coefficient of divorce, and the p-value.\nReproduction results\n\n#Model 4\nmodel4 &lt;- run_model(months = 36:longest_marriage) \nsummary(model4)$tTable[\"divorced\", c(\"Value\", \"p-value\")] #check estimate + p-value model 4\n\n     Value    p-value \n0.48170489 0.00562246 \n\nmodel4$dims$ngrps[1] #check sample size model 4\n\n id \n453 \n\n\nReproduction outcome: Based on the reproduction criteria, the claim did reproduce."
  },
  {
    "objectID": "score-1.html#description-of-materials-provided",
    "href": "score-1.html#description-of-materials-provided",
    "title": "1  SCORE Criminology",
    "section": "1.6 Description of materials provided",
    "text": "1.6 Description of materials provided\nAll materials on the OSF project may be shared publicly. Overview and description of the materials:\n\nBERSANI_Criminology_2013_zmYY_bushel_claims.md\nAn overview of all claims extracted from the paper\nBERSANI_Criminology_2013_zmYY_2w9mo_SDR_PREREGISTRATION.xlsx\nExcel workbook with the preregistered reproduction criteria for all claims part of the reproduction attempt\nNLSY97.dat\nData file (National Longitudinal Study of Youth 1997) downloaded from the NLS investigator\ncodebook.txt\nCodebook (data dictionary) accompanying NLSY97.dat\nhelper-functions.R\nHelper functions accompanying NLSY97.dat\nAnalysis-script.Rmd\nPreregistered analysis script (on randomly shuffled, blinded data)\nAnalysis-script.html\nKnitted output of the preregistered analysis script (on randomly shuffled, blinded data)\nTransparency Trail.Rmd\nTransparency trail of the reproduction attempt. This includes the analysis pipeline and full results/output of the analysis script (applied to the unblinded data)\nTransparency-Trail.pdf\nKnitted output of the transparency trail of the reproduction attempt. This includes the analysis pipeline and full results/output of the analysis script (applied to the unblinded data)"
  },
  {
    "objectID": "score-1.html#references",
    "href": "score-1.html#references",
    "title": "1  SCORE Criminology",
    "section": "1.7 References",
    "text": "1.7 References\nBersani, B. E.; Doherty, E. (2013). When the ties that bind unwind: Examining the enduring and situational processes of change behind the marriage effect. Criminology, 51(2), 399. https://doi.org/10.1111/1745-9125.12008\nBureau of Labor Statistics, U.S. Department of Labor. National Longitudinal Survey of Youth 1997 cohort, 1997-2009. Produced and distributed by the Center for Human Resource Research (CHRR), The Ohio State University. Columbus, OH: 2019."
  }
]